# CRM项目思路整理

## 基础模块

### 项目环境搭建

* 该项目所使用的技术栈

![1685005255743](笔记.assets/1685005255743.png)

* 创建普通Java的maven项目
* 引入parent的标签，对应的依赖和插件到pom.xml文件中
* 创建resource资源目录，将spring的yml配置文件放进去，并修改对应的配置和路径
* 新建一个视图控制器IndexController继承BaseController（通用的）
* copy三个方法到视图控制器中，转发到对应的页面
* copy对应需要转发到的视图模板页面
* 创建一个启动类。加上SpringbootApplication对应的注解
* 输入项目的登录路径：localhost:8080/crm/index

### 用户登录

#### 用户登录功能的思路

* 后端思路
  * 整体思路
    1. 参数判断
       1. 用户姓名	非空校验
       2. 用户密码    非空校验
    2. 通过用户名查询用户记录，并返回用户对象
    3. 判断用户对象是否为空
    4. 如果为空，则直接抛出异常，说明用户不存在
    5. 如果不为空，则说明用户存在，则直接将前台传入的密码和数据库中拿到的用户密码进行比较
    6. 判断用户密码是否正确
    7. 如果正确则说明登录成功，返回结果
  * 具体实现思路
    * Controller层
      1. 通过形参接收客户端传递的参数
      2. 调用service层的登录方法，并得到service层的登录结果
      3. 响应数据给客户端
    * service层
      1. 非空校验 用户名和密码
         1. 如果为空，则向控制层抛出异常，并被控制层捕获并处理
      2. 调用Dao层中的查询方法，通过用户名查询用户记录，返回用户对象
      3. 判断用户对象是否为空
         1. 如果为空，则向控制层抛出异常
      4. 判断密码是否正确，将客户端传入的用户密码加密之后和数据库中查询到的密码进行比较
         1. 如果不相等则抛出异常
      5. 如果密码正确，登录成功
    * Dao层
      * 通过用户名查询用户对象，并返回给service层

#### 登录模块后端代码的实现

* 使用逆向工程生成数据库中对应表的实体类、Dao层的接口和mapper的SQL映射文件
* controller层、service层和dao层继承base类，就可以使用其中公用的方法了
* controller层注入service层，service层注入dao层的对象
* 修改dao层的接口为需要的接口（传入的String类型的用户名，返回值是User用户对象）
* 写mapper文件中的SQL，SQL中的id、入参和返回值更具dao层中的接口来判断
* service层
  * 非空校验
  * 查询用户对象
  * 判断对象是否非空
  * 密码比较（加密后比较）
  * 密码正确，登录成功
  * 如果以上的流程中判断为空，则会直接抛出异常
* controller层
  * 如果service层抛出异常，则会被controller层捕获到，然后设置相对应的异常状态码和提示信息给到resutInfo对象中，然后再返回给Ajax的回调函数
  * 如果是登录成功，则会在service层中直接将查询到的登录用户对象User的Id、用户名和用户密码设置到UserModel中，然后再返回给controller层中UserModel对象，最后再将UserModel设置到resultInfo对象中的result中，再返回给Ajax的回调函数

#### 登录页面的前端代码实现

* 登录页面的表单提交事件的函数是绑定的index模板中的lay-filter属性值login
* 在提交事件的函数中使用Ajax向后台发送请求（用户名和密码）
* 回调函数接收resultInfo对象，判断状态码是否是200
* 如果状态码是200，则登录成功，设置cookie信息，表示用户的登录状态，然后跳转到登录成功之后的页面
* 否则登录失败，提示用户登录失败

### 退出

### 记住密码

### 密码修改

## 营销管理

### 营销机会管理

### 客户开发计划

## 系统管理

### 字典管理

### 日志管理

### 用户管理

### 角色管理  

### 资源管理

## 客户管理

## 服务管理

## 数据报表

## CRM项目部署

### Linux系统安装

#### VWmare虚拟机的安装

#### contOS的配置

### 静态配置IP与Xshell使用

#### 静态IP地址

##### 桥接模式

* 主机和虚拟机在通过一个网段上

##### NAT模式

* 主机和虚拟机不在通过一个网段上，所以如果想要去访问虚拟机的话，则必须要先访问主机，然后再通过主机去访问虚拟机